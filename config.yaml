experiment:
  base_dir: 'experiments'  # Base directory for all experiments

data:
  root_dir: "/mnt/d/data/inria_exp/inria_exp/"
  # subjects: ["subject_001", "subject_002"]  # List of subject folders or files
  batch_size: 1  # 3D volumes often use batch_size=1 due to memory
  num_workers: 0  # Set to 0 for medical images to avoid multiprocessing issues

model:
  in_channels: 2  # Fixed moving concatenated
  localization_channels: [8, 10]  # CNN layers for localization net
  affine_params: 12  # 3x4 affine matrix flattened (for 3D: 12 params)
  learning_rate: 0.0001
  weight_decay: 0.0001
  epochs: 100
  # device: "cuda" if available else "cpu"
  device: "cpu"

transforms:
  degrees: [-20, 20]  # Rotation range in degrees
  translate: [1, 1, 1]  # In mm
  scale: [0.9, 1.1]  # Scaling range
  shear: [-0.1, 0.1]  # Shearing range

loss:
  lambda_affine: 1.0  # Weight for affine prediction loss (MSE)
  lambda_mi: 1.0      # Weight for mutual information
  patch_size: [64, 64, 64]  # For local MI computation to reduce noise
  lambda_similarity: 0.5  # Renamed from lambda_mi
  similarity_metric: 'mse'  # Options: 'ncc', 'lncc', 'mi', 'mse'

preprocess:
  target_spacing: [1,1,1]
  crop_size_mm: [64, 64, 64]

visualization:
  gradient_clip_norm: 1.0
  frequency: 5  # Visualize every 5 epochs